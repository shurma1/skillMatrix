import{j as e,T as x,F as n,I as d,B as g,u as j,a as y,r as o,s as f,A as b,t as w,b as F,c as C}from"./index-C2zTCuKe.js";const k=({onFinish:s,onFinishFailed:t,isLoading:i})=>e.jsxs("div",{style:{width:"100%"},children:[e.jsx(x.Title,{level:3,style:{textAlign:"center",marginBottom:24},children:"Авторизация"}),e.jsxs(n,{name:"login",layout:"vertical",onFinish:s,onFinishFailed:t,autoComplete:"off",children:[e.jsx(n.Item,{label:"Логин или Email",name:"identifier",rules:[{required:!0,message:"Пожалуйста, введите логин или email!"}],children:e.jsx(d,{placeholder:"username@example.com"})}),e.jsx(n.Item,{label:"Пароль",name:"password",rules:[{required:!0,message:"Пожалуйста, введите пароль!"}],children:e.jsx(d.Password,{placeholder:"••••••••"})}),e.jsx(n.Item,{children:e.jsx(g,{block:!0,type:"primary",htmlType:"submit",loading:i,children:"Войти"})})]})]}),A=({onSuccess:s})=>{const[t,{data:i,isLoading:c,isError:h,error:a}]=j(),l=y(),u=o.useCallback(r=>{if(!r.identifier||!r.password)return;const p={identifier:r.identifier,password:r.password};t(p)},[t]),m=o.useCallback(()=>{},[]);return o.useEffect(()=>{i&&(l(f(i)),s?.(i))},[i,l]),e.jsxs("div",{style:{width:"100%",maxWidth:350},children:[e.jsx(k,{onFinish:u,onFinishFailed:m,isLoading:c}),h&&e.jsx(b,{style:{marginBottom:16},type:"error",message:typeof a=="object"&&a!==null?"Неверные учетные данные":"Ошибка авторизации",showIcon:!0,closable:!0})]})},I=()=>{const{token:s}=w.useToken();return F(t=>t.theme),e.jsx(C,{vertical:!0,justify:"center",align:"center",style:{minHeight:"100dvh",width:"100%",backgroundColor:s.colorBgContainer,color:s.colorText},children:e.jsx("div",{style:{padding:24,width:"100%",display:"flex",justifyContent:"center"},children:e.jsx(A,{})})})},T=()=>e.jsx(I,{});export{T as default};
