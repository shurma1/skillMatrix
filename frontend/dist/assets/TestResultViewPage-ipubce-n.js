import{t as S,j as e,z as k,B as g,R as B,v as d,C as n,T as C,D as b,d as I,J as P}from"./index-C2zTCuKe.js";import{R as h}from"./index-D_6T43LE.js";import{R as j}from"./CheckCircleOutlined-BH__vJpJ.js";import{R as m,S as x}from"./index-CX4mJsSu.js";const{Title:R,Text:p}=C,$=({testResult:o,isLoading:l,error:a,onNavigateHome:c})=>{const{token:s}=S.useToken();if(l)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(k,{size:"large"})});if(a||!o)return e.jsx(h,{status:"error",title:"Ошибка загрузки результатов",subTitle:"Не удалось загрузить результаты тестирования",extra:[e.jsx(g,{type:"primary",onClick:c,children:"На главную"},"home")]});const i=o.score>=o.needScore,y=Math.round(o.score/o.questions.length*100);return e.jsxs("div",{style:{maxWidth:800,margin:"0 auto",padding:"24px"},children:[e.jsx(h,{status:i?"success":"error",icon:i?e.jsx(j,{}):e.jsx(m,{}),title:i?"Тест пройден успешно!":"Тест не пройден",subTitle:`Вы набрали ${o.score} из ${o.needScore} необходимых баллов`}),e.jsxs(B,{gutter:16,style:{marginBottom:24},children:[e.jsx(d,{span:8,children:e.jsx(n,{children:e.jsx(x,{title:"Правильных ответов",value:o.score,suffix:`/ ${o.questions.length}`,valueStyle:{color:i?s.colorSuccess:s.colorError}})})}),e.jsx(d,{span:8,children:e.jsx(n,{children:e.jsx(x,{title:"Процент успеха",value:y,suffix:"%",valueStyle:{color:i?s.colorSuccess:s.colorError}})})}),e.jsx(d,{span:8,children:e.jsx(n,{children:e.jsx(x,{title:"Нужно для прохождения",value:o.needScore,suffix:`/ ${o.questions.length}`})})})]}),e.jsx(n,{title:"Детальные результаты",style:{marginBottom:24},children:o.questions.map((t,T)=>{const f=t.answers.filter(r=>r.isTrue),u=t.answers.filter(r=>r.isPicked),v=u.length===f.length&&u.every(r=>r.isTrue);return e.jsxs("div",{style:{marginBottom:24,padding:16,border:`1px solid ${s.colorBorder}`,borderRadius:4,background:s.colorBgContainer},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:12},children:[e.jsxs(R,{level:5,style:{margin:0,marginRight:8},children:["Вопрос ",T+1]}),v?e.jsx(j,{style:{color:s.colorSuccess}}):e.jsx(m,{style:{color:s.colorError}})]}),e.jsx(p,{style:{marginBottom:12,display:"block"},children:t.QuestionText}),e.jsx("div",{children:t.answers.map(r=>e.jsx("div",{style:{padding:"8px 12px",margin:"4px 0",borderRadius:4,backgroundColor:r.isTrue?s.colorSuccessBg:r.isPicked?s.colorWarningBg:s.colorFillTertiary,border:`1px solid ${r.isTrue?s.colorSuccess:r.isPicked?s.colorWarning:s.colorBorder}`},children:e.jsxs(p,{style:{color:r.isTrue?s.colorSuccess:r.isPicked?s.colorWarning:s.colorText},children:[r.answerText,r.isPicked&&!r.isTrue&&" ✗ (ваш ответ)"]})},r.answerId))})]},t.QuestionID)})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(g,{type:"primary",size:"large",onClick:c,children:"На главную"})})]})},E=()=>{const{testId:o=""}=b(),l=I(),{data:a,isLoading:c,error:s}=P(o,{skip:!o}),i=()=>{l("/")};return e.jsx($,{testResult:a,isLoading:c,error:s,onNavigateHome:i})},V=()=>e.jsx(E,{});export{V as default};
